$(document).ready(function() { 
    // Load current tab
    tabsLoad("createBattery");

	//var timestamp = "1392822000000";
	//new Date(unixTime*1000);
	
	///alert("timestamp" + timestamp);
	//alert("D" + jsDate.toDateString());
	//alert("M" + jsDate.getMonth());
	//alert("Y" + jsDate.getYear());
		
    // Date Picker Start - Call picker and focus for 508         
    var fromAssessmentDateGroup  = "#fromAssessmentDateGroup";
    var toAssessmentDateGroup    = "#toAssessmentDateGroup";
    $(fromAssessmentDateGroup).datepicker({
			showOn : 'button',
      format: 'mm/dd/yyyy',
			autoclose: true,
			startDate: 'd'
	});

	$(toAssessmentDateGroup).datepicker({
			showOn : 'button',
      format: 'mm/dd/yyyy',
			autoclose: true,
			startDate: 'd'
		});

		$('.id_header_tooltip').tooltip({
			'placement': 'top'
		});

		$('#selectedClinic').on('change', function() {
			$("#clinicId").val(this.value);
		});
	
		// Select/Deselect all vetIensCheckbox
		var selectAll = "#selectAll";
		var vetIensCheckbox = ".vetIensCheckbox";

		var vetIensCheckboxChecked  = ".vetIensCheckbox:checked";
		var createAssessmentButton  = ".createAssessmentButton";
		var vetIensCheckbox 		= ".vetIensCheckbox";
		var selectAllChecked  = '#selectAll:checked';


		
		// selectAll on click
		$(selectAll).click (function () {
			 var checkedStatus = this.checked;
			$(vetIensCheckbox).each(function () {
				$(this).prop('checked', checkedStatus);
			 });
		});

		// selectAll on change
		$(selectAll).change(function() {
			if($(this).is(":checked")) {
				$(createAssessmentButton).removeAttr('disabled');
			}else{
				$(createAssessmentButton).attr('disabled','disabled');
			}
	});
	
	// vetIensCheckbox checkbox on change
	$(vetIensCheckbox).change(function() {
		if($(vetIensCheckboxChecked).length >= 1) {
			$(createAssessmentButton).removeAttr('disabled');
		}else if($(vetIensCheckboxChecked).length <= 0) {
			$(createAssessmentButton).attr('disabled','disabled');
		}
		if($(vetIensCheckboxChecked).length < $(vetIensCheckbox).length){
			$('#selectAll').prop('checked', false)
		}else if ($(vetIensCheckboxChecked).length == $(vetIensCheckbox).length){
			$('#selectAll').prop('checked', true);
		}
	});


	// Add Ladda preloader
	Ladda.bind( '.createAssessmentButton', 20000 );


	/* Disabled for testing purpose
	$("#startDate").on("change focusout input", function() {
			var date = $('#startDate').val();
			var endDate 	= $('#endDate').val();
			date = vDate(date);
	
			if (date < new Date()  || date > vDate(endDate)) {
				$(".startDateError").removeClass("hide");
			}else{
				$(".startDateError").addClass("hide");
			}
	});

	$("#endDate").on("change focusout input", function() {
			var date 		= $('#endDate').val();
			var startDate 	= $('#startDate').val();
			date = vDate(date);
			console.log("startDate" );
			console.log(startDate);
			
			if (date < new Date() || date < vDate(startDate)) {
				$(".endDateError").removeClass("hide");
			}else{
				$(".endDateError").addClass("hide");
			}
	});


	function vDate(date){
		var parts = date.split('/');
		var date = new Date(parseInt(parts[2], 10),     // year
							parseInt(parts[1], 10) - 1, // month, starts with 0
							parseInt(parts[0], 10));    // day
		return date;
	}
	*/
	


	// searchable select options
	$("select").searchable({
		maxListSize: 100,						// if list size are less than maxListSize, show them all
		maxMultiMatch: 50,						// how many matching entries should be displayed
		exactMatch: false,						// Exact matching on search
		wildcards: true,						// Support for wildcard characters (*, ?)
		ignoreCase: true,						// Ignore case sensitivity
		latency: 200,							// how many millis to wait until starting search
		warnMultiMatch: 'top {0} matches ...',	// string to append to a list of entries cut short by maxMultiMatch 
		warnNoMatch: 'no matches ...',			// string to show in the list when no entries match
		zIndex: 'auto'							// zIndex for elements generated by this plugin
	});
				
								
});
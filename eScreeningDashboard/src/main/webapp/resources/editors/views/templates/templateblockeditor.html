<div class="border-radius-block-type bg-gray-light">
	<div class="row">
		<div class="col-md-2">
			<div class="form-group">
				<label class="control-label">Block Type
					<select class="form-control input-block-level"
					        ng-model="block.type"
					        ng-options="blocktype.value as blocktype.name for blocktype in blockTypes">
					<option value="">-- Select Type --</option>
				</select> </label>
			</div>
		</div>

		<div class="col-md-8">
			<div ng-if="block.type && block.type !== 'text' && block.type !== 'else'" class="blockLableMarginTop">
				<div class="row">
					<div class="col-md-4">
						<div class="form-group">
							<label class="sr-only">Select Variable</label>
							<input type="hidden"
							       ng-model="block.left.content"
							       ng-change="updateLogicalOptions(block)"
							       update-hidden>
							<mhe-assessment-var-dropdown-menu-dir guid="block.guid"
							                                      assessment-variable="block.left.content"
							                                      ng-class="{error: templateBlockEditorForm.selectedAssessmentVariable.$invalid && showValidationMessages}">
								<mhe-assessment-var-tbl-dir assessment-variables="assessmentVariables"
								                            assessment-variable="block.left.content"
								                            guid="block.guid" />
							</mhe-assessment-var-dropdown-menu-dir>
						</div>
					</div>
					<div class="col-md-4">
						<div class="form-group"
						     ng-class="{'has-error': templateBlockEditorForm.blockOperator.$invalid && showValidationMessages}">
							<select name="blockOperator"
							        class="form-control"
							        ng-model="block.operator"
							        ng-options="operator.value as operator.name for operator in block.operators"
							        required>
								<option value="">-- Operator --</option>
							</select>
						</div>
					</div>

					<div class="col-md-4">
						<div class="form-group"
						     ng-if="showBlockConditionRight(block.operator)"
						     ng-class="{'has-error': templateBlockEditorForm.blockValue.$invalid && showValidationMessages}">
							<label class="sr-only" for="blockvalue">Enter Value</label>
							<div ng-if="!block.measureAnswers || !block.measureAnswers.length">
								<div ng-if="block.measureValidations['number']">
									<input type="number"
									       class="form-control"
									       name="blockValue"
									       id="blockvalue"
									       placeholder="Enter Value"
									       ng-model="block.right.content"
									       min="{{block.measureValidation['minValue']}}"
									       max="{{block.measureValidation['maxValue']}}"
									       required>
								</div>
								<div ng-if="block.measureValidations['email']">
									<input type="email"
									       class="form-control"
									       name="blockValue"
									       id="blockvalue"
									       placeholder="Enter Value"
									       ng-model="block.right.content"
									       required>
								</div>
								<div ng-if="block.measureValidations['date']">
									<input
										type="text"
										class="form-control"
										name="blockValue"
										id="blockvalue"
										datepicker-popup="'mm/dd/yyyy"
										ng-model="block.right.content"
										is-open="opened"
										datepicker-options="{ startingDay: 1}"
										close-text="Close"
										required />
								</div>
								<div ng-if="!block.measureValidations['email'] && !block.measureValidations['date'] && !block.measureValidations['number']">
									<input type="text"
									       class="form-control"
									       name="blockValue"
									       id="blockvalue"
									       placeholder="Enter Value"
									       ng-model="block.right.content"
									       ng-minlength="block.measureValidations['minLength']"
									       ng-maxlength="block.measureValidations['maxLength']"
									       required>
								</div>
							</div>
							<select class="form-control"
							        name="blockValue"
							        id="blockvalue"
							        ng-model="block.right.content"
							        ng-if="block.measureAnswers && block.measureAnswers.length"
							        ng-options="answer.calculationValue as answer.answerText for answer in block.measureAnswers"
							        required>
								<option value="">-- Answer --</option>
							</select>
						</div>
					</div>
				</div>
			</div>
		</div>
		<div class="col-md-2 pull-right">
			<div class="pull-right blockLableMarginTop">
				<button title="AND"
				        class="btn btn-default"
				        ng-click="addAndConditionBlock(block, templateBlockEditorForm)"
				        ng-if="block.type && block.type !== 'text' && block.type !== 'else'">AND
				</button>
				<button title="OR"
				        class="btn btn-default"
				        ng-click="addOrConditionBlock(block, templateBlockEditorForm)"
				        ng-if="block.type && block.type !== 'text' && block.type !== 'else'"
				        ng-disable="templateBlockEditorForm.$invalid">OR
				</button>
				<!--button title="PLUS" class="btn btn-default" ng-click="addBlock(block)"  ng-if="block.type && block.type !== 'text'"><i class="fa fa-plus"></i></button-->
			</div>
			<div class="clearfix"></div>
		</div>
	</div>


	<div class="clearfix form-group" ng-if="block.type === 'text'">
		<hr />

		<div text-angular="text-angular"
		     ta-toolbar="[['h1','h2','h3'],['bold','italics', 'underline'], ['ol', 'ul'], ['justifyLeft', 'justifyCenter', 'justifyRight'], ['indent', 'outdent'], ['insertLink', 'insertVideo'], ['redo', 'undo'] , ['html'], ['insertVariable']]"
		     ng-model="block.content"
		     ta-toolbar-class="btn-toolbar"
		     ta-toolbar-group-class="btn-group"
		     ta-toolbar-button-class="btn btn-default"
		     ta-toolbar-button-active-class="active"
		     ta-default-wrap="div" 
		     name="text-block-editor"
		     class="tab-content"></div>
	</div>
</div>
<div class="border-radius-block-type bg-gray-light" ng-repeat="condition in block.conditions">
	<ng-form name="conditionForm">
		<div class="row">
			<div class="col-md-2">
				<div class="blockLableMarginTop">
					<button title="{{condition.connector | uppercase}}"
					        class="btn btn-default"
					        ng-bind="condition.connector | uppercase"
					        disabled></button>
				</div>
			</div>

			<div class="col-md-8">
				<div class="blockLableMarginTop">
					<div class="row">
						<div class="col-md-4">
							<div class="form-group">
								<label class="sr-only">Select Variable</label>
								<input type="hidden"
								       ng-model="condition.left.content"
								       ng-change="updateLogicalOptions(condition)"
								       update-hidden>
								<mhe-assessment-var-dropdown-menu-dir guid="condition.guid"
								                                      assessment-variable="condition.left.content"
								                                      ng-class="{error: conditionForm.selectedAssessmentVariable.$invalid && showValidationMessages}">
									<mhe-assessment-var-tbl-dir assessment-variables="assessmentVariables"
									                            assessment-variable="condition.left.content"
									                            guid="condition.guid" />
								</mhe-assessment-var-dropdown-menu-dir>
							</div>
						</div>
						<div class="col-md-4">
							<div class="form-group" ng-class="{'has-error': conditionForm.conditionOperator.$invalid &&
showValidationMessages}">
								<select class="form-control"
								        name="conditionOperator"
								        ng-model="condition.operator"
								        ng-options="operator.value as operator.name for operator in condition.operators"
								        required>
									<option value="">-- Operator --</option>
								</select>
							</div>
						</div>

						<div class="col-md-4">
							<div class="form-group"
							     ng-if="showBlockConditionRight(condition.operator)"
							     ng-class="{'has-error': conditionForm.conditionValue.$invalid && showValidationMessages}">
								<label class="sr-only" for="conditionValue">Enter Value</label>
								<div ng-if="!condition.measureAnswers || !condition.measureAnswers.length">
									<div ng-if="condition.measureValidations['number']">
										<input type="number"
										       class="form-control"
										       name="conditionValue"
										       id="conditionvalue"
										       placeholder="Enter Value"
										       ng-model="condition.right.content"
										       min="{{condition.measureValidation['minValue']}}"
										       max="{{condition.measureValidation['maxValue']}}"
										       required>
									</div>
									<div ng-if="condition.measureValidations['email']">
										<input type="email"
										       class="form-control"
										       name="conditionValue"
										       id="conditionvalue"
										       placeholder="Enter Value"
										       ng-model="condition.right.content"
										       required>
									</div>
									<div ng-if="condition.measureValidations['date']">
										<input
											type="text"
											class="form-control"
											name="conditionValue"
											id="conditionvalue"
											datepicker-popup="'mm/dd/yyyy"
											ng-model="condition.right.content"
											is-open="opened"
											datepicker-options="{ startingDay: 1}"
											close-text="Close"
											required />
									</div>
									<div ng-if="!condition.measureValidations['email'] && !condition.measureValidations['number'] && !condition.measureValidations['date']">
										<input type="text"
										       class="form-control"
										       name="conditionValue"
										       id="conditionvalue"
										       placeholder="Enter Value"
										       ng-model="condition.right.content"
										       ng-minlength="{{condition.measureValidation['minLength']}}"
										       ng-maglegnth="{{condition.measureValidation['maxLength']}}"
										       required>
									</div>
								</div>
								<select
									class="form-control"
									name="blockValue"
									id="conditionvalue"
									ng-model="condition.right.content"
									ng-if="condition.measureAnswers && condition.measureAnswers.length"
									ng-options="answer.calculationValue as answer.answerText for answer in condition.measureAnswers"
									required>
									<option value="">-- Answer --</option>
								</select>
							</div>
						</div>
					</div>
				</div>
			</div>
			<div class="col-md-2">
				<div class="pull-right blockLableMarginTop">
					<!--button title="AND" class="btn btn-default" ng-click="addAndConditionBlock(condition)">AND</button>
					<button title="OR" class="btn btn-default" ng-click="addOrConditionBlock(condition)">OR</button-->
	                <span class="glyphicon glyphicon-remove-circle cursor_pointer" style="margin-left: 10px; color:red;"
	                      ng-click="removeConditionBlock(block.conditions, condition)"></span>
				</div>
				<div class="clearfix"></div>
			</div>
		</div>
	</ng-form>
</div>
